---
title: Choosing Nearby Colors Part 2
author: Tyler
date: '2021-08-10'
slug: index.en-us
summary: Follow-up from previous post.
thumbnailImage: /post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/thumbnail.png
thumbnailImagePosition: "bottom"
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>Flip xyl - hcl order.</p>
<p>This blog post follows up from the previous one. Code in that post finds colors in the HCL color space by sampling points from a sphere centered on a base point. There’s a mismatch between how the sphere is determined (Cartesian coordinates of x, y, L) and the colors are specified (polar coordinates of H, C, L) so a conversion happens in the code.</p>
<p>This post looks into what happens if you just start with a “sphere” based on Hue, Chroma, Luminance values. So we’ll set up shapes that expand out from the base point along Hue, Chroma, and Luminance directly.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<hr>
<center>
<h2>
Base Point Location
</h2>
</center>
<hr>
<details>
<summary>
[A Lot of Setup Code]
</summary>
<pre class="r"><code>##---------
# Libraries
##---------
library(tidyverse)
library(patchwork)
library(colorspace)

##------------
# Pick a color
##------------
H_point &lt;- 322
C_point &lt;- 26
L_point &lt;- 69

color_hex &lt;- hcl(H_point, 
                 C_point, 
                 L_point,
                 fixup = FALSE)

##--------------------------------
# See color in H, C, L color space 
##--------------------------------
# C-L Plane ----
get_C_L_plane &lt;- function(H_point) {
  expand_grid(H = H_point,
              C = seq(0, 180, .5),
              L = seq(1, 100, .5)) %&gt;%
    mutate(color_value = hcl(H, C, L, fixup = FALSE)) %&gt;%
    filter(!is.na(color_value))
}
C_L_plane &lt;- get_C_L_plane(H_point)

graph_C_L_plane &lt;- function(C_L_plane, color_hex) {
  ggplot() +
    geom_point(data = C_L_plane,
               aes(C, L, color = color_value, fill = color_value)) +
    scale_x_continuous(labels = abs) +
    scale_color_identity() +
    scale_fill_identity() +
    geom_point(aes(x = C_point,
                   y = L_point),
               color = &#39;black&#39;,
               fill = color_hex,
               shape = 21,
               size = 2) +
    coord_equal()
}
graph_C_L_plane(C_L_plane, color_hex)

# H-L Curve ----
get_H_L_curve &lt;- function(C_point) {
  expand_grid(H = seq(1, 360, 1),
              C = C_point,
              L = seq(1, 100, .5)) %&gt;%
    mutate(color_value = hcl(H, C, L, fixup = FALSE)) %&gt;%
    filter(!is.na(color_value))
}
H_L_curve &lt;- get_H_L_curve(C_point)

label_H_center &lt;- function(H_point, ...) {
  function(x) {(x + (180 - H_point)) %% 360}
}

graph_H_L_curve &lt;- function(H_L_curve, color_hex, H_point) {
  ggplot() +
    geom_point(data = H_L_curve,
               aes((H + (180 - H_point)) %% 360, L, 
                   color = color_value, fill = color_value)) +
    scale_color_identity() +
    scale_fill_identity() +
    geom_point(aes(x = 180, # Because we rotated points to not drop over edge
                   y = L_point),
               color = &#39;black&#39;,
               fill = color_hex,
               shape = 21,
               size = 2) +
    scale_x_reverse(&#39;H&#39;, # Like you&#39;re standing on the inside
                    labels = label_H_center(H_point = H_point),
                    limits = c(360, 0)) +
    coord_equal()
}
graph_H_L_curve(H_L_curve, color_hex, H_point)

# H-C plane ----
get_H_C_plane &lt;- function(L_point){
  expand_grid(H = seq(1, 360, 1),
              C = seq(0, 180, .5),
              L = L_point) %&gt;%
    mutate(color_value = hcl(H, C, L, fixup = FALSE)) %&gt;%
    filter(!is.na(color_value))
}
H_C_plane &lt;- get_H_C_plane(L_point)

graph_H_C_plane &lt;- function(H_C_plane, color_hex) {
  ggplot() +
    geom_point(data = H_C_plane,
               aes(H, C, color = color_value, fill = color_value)) +
    scale_color_identity() +
    scale_fill_identity() +
    scale_x_continuous(breaks = seq(45, 360, 45),
                       minor_breaks = seq(0, 315, 45) + 45/2,
                       labels = c(&#39;45&#39;, &#39;90&#39;, &#39;135&#39;, &#39;180&#39;, 
                                  &#39;225&#39;, &#39;270&#39;, &#39;315&#39;, &#39;0|360&#39;)) +
    scale_y_continuous(limits = c(0, 180)) +
    geom_point(aes(x = H_point,
                   y = C_point),
               color = &#39;black&#39;,
               fill = color_hex,
               shape = 21,
               size = 2) +
    coord_polar(start = 270 * pi / 180,
                direction = -1)
}
graph_H_C_plane(H_C_plane, color_hex)

# C tangent plane ----
C_circle &lt;- data.frame(H = seq(1, 360),
                       C = C_point,
                       color_value = &quot;white&quot;)
C_tangent_plane &lt;- expand_grid(x = C_point, # Plane perpendicular to H at C
                               perpendicular_from_C_L = 
                                 seq(-sqrt(180^2 - C_point^2), sqrt(180^2 - C_point^2)),
                               L = seq(1, 100, 1)) %&gt;%
  mutate(x_rotate = x * cos(H_point * pi/180) -  # rotate
           perpendicular_from_C_L * sin(H_point * pi/180),
         y_rotate = x * sin(H_point * pi/180) + 
           perpendicular_from_C_L * cos(H_point * pi/180)) %&gt;%
  mutate(x = x_rotate,
         y = y_rotate) %&gt;%
  select(-x_rotate, -y_rotate)  %&gt;%
  mutate(H = (atan2(y, x) * 180/pi) %% 360,
         C = sqrt(x^2 + y^2)) %&gt;%
  mutate(color_value = &quot;white&quot;)
ggplot(data = H_C_plane,
       aes(H, C, color = color_value, fill = color_value)) +
  geom_point() +
  scale_color_identity() +
  scale_fill_identity() +
  scale_x_continuous(breaks = seq(45, 360, 45),
                     minor_breaks = seq(0, 315, 45) + 45/2,
                     labels = c(&#39;45&#39;, &#39;90&#39;, &#39;135&#39;, &#39;180&#39;, 
                                &#39;225&#39;, &#39;270&#39;, &#39;315&#39;, &#39;0|360&#39;)) +
  scale_y_continuous(limits = c(0, 180)) +
  geom_path(data = C_circle) +
  geom_segment(x = H_point,
               y = 0,
               xend = H_point,
               yend = C_point,
               col = &quot;white&quot;) +
  geom_point(data = C_tangent_plane, col = &quot;black&quot;) +
  geom_point(x = H_point,
             y = C_point,
             color = &#39;black&#39;,
             fill = color_hex,
             shape = 21) +
  coord_polar(start = 270 * pi / 180,
              direction = -1)

get_C_tangent_plane &lt;- function(H_point, C_point) {
  expand_grid(x = C_point, # Plane perpendicular to H at C
              perpendicular_from_C_L = seq(-180, 180, .5),
              L = seq(1, 100, .5)) %&gt;%
    mutate(x_rotate = x * cos(H_point * pi/180) -  # rotate
             perpendicular_from_C_L * sin(H_point * pi/180),
           y_rotate = x * sin(H_point * pi/180) + 
             perpendicular_from_C_L * cos(H_point * pi/180)) %&gt;%
    mutate(x = x_rotate,
           y = y_rotate) %&gt;%
    select(-x_rotate, -y_rotate)  %&gt;%
    mutate(H = (atan2(y, x) * 180/pi) %% 360,
           C = sqrt(x^2 + y^2)) %&gt;%
    mutate(color_value = hcl(H, C, L, fixup = FALSE)) %&gt;%
    filter(!is.na(color_value))
}
C_tangent_plane &lt;- get_C_tangent_plane(H_point, C_point)

graph_C_tangent_plane &lt;- function(C_tangent_plane, color_hex) {
  ggplot() +
    geom_point(data = C_tangent_plane,
               aes(perpendicular_from_C_L, L, 
                   color = color_value, fill = color_value)) +
    scale_color_identity() +
    scale_fill_identity() +
    scale_x_reverse(&quot;Distance Perpendicular to C-L Plane&quot;,
                    labels = abs) +
    geom_point(aes(x = 0,
                   y = L_point),
               color = &#39;black&#39;,
               fill = color_hex,
               shape = 21,
               size = 2) +
    coord_equal()
}
graph_C_tangent_plane(C_tangent_plane, color_hex)</code></pre>
</details>
<p><br></p>
<p>Let’s first look at all our graphs for our base color. This time I’m picking pink. We can see the C-L Plane, H-C Plane, and H-L Curve images to get a basic understanding of where the color is in the HCL color space.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center; grid-column-gap: 1px;">
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/c_l_plane.png" alt="Base Color: C-L Plane" style="display:block; margin:auto;" />
<p class="caption">
Base Color: C-L Plane
</p>
</div>
</div>
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/h_c_plane.png" alt="Base Color: H-C Plane" style="display:block; margin:auto;" />
<p class="caption">
Base Color: H-C Plane
</p>
</div>
</div>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/h_l_curve.png" alt="Base Color: H-L Curve" style="display:block; margin:auto;" />
<p class="caption">
Base Color: H-L Curve
</p>
</div>
<p>Then we can look at the plane tangent to the H-L Curve to see the space perpendicular to the C-L plane.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center; grid-column-gap: 1px;">
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/c_tangent_plane_setup.png" alt="C Tangent Plane setup" style="display:block; margin:auto;" />
<p class="caption">
C Tangent Plane setup
</p>
</div>
</div>
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/c_tangent_plane.png" alt="Base Color: Plane Perpendicular to C-L Plane" style="display:block; margin:auto;" />
<p class="caption">
Base Color: Plane Perpendicular to C-L Plane
</p>
</div>
</div>
</div>
<p>After the base color is set, we can look at what happens if you extend out to a sphere.</p>
<hr>
<center>
<h2>
xyL Perimeter
</h2>
</center>
<hr>
<details>
<summary>
[xyL Perimeter Code]
</summary>
<pre class="r"><code>##------------------
# x, y, L perimeter
##------------------
width &lt;- 15
n_color &lt;- 50 ^ 2

# http://extremelearning.com.au/how-to-evenly-distribute-points-on-a-sphere-more-effectively-than-the-canonical-fibonacci-lattice/#more-3069
get_xyl_data &lt;- function(H_point, C_point, L_point, width, n_color) {
  data.frame(theta = 2 * pi * seq(0, n_color - 1) / ((1 + sqrt(5)) / 2),
             phi = acos(1 - 2 * (seq(0, n_color - 1) + .5) / n_color)) %&gt;%
    mutate(x = cos(theta) * sin(phi),
           y = sin(theta) * sin(phi),
           L = cos(phi)) %&gt;%
    mutate(x = x * width + C_point * cos(H_point * pi/180),
           y = y * width + C_point * sin(H_point * pi/180),
           L = L * width + L_point) %&gt;%
    mutate(H = (atan2(y, x) * 180/pi) %% 360,
           C = sqrt(x^2 + y^2)) %&gt;%
    filter(L &gt;= 0 &amp; L &lt;= 100 &amp; C &gt;= 0) %&gt;%
    mutate(color_value = hcl(h = H,
                             c = C,
                             l = L)) %&gt;%
    mutate(x = C * cos(H * pi/180),
           y = C * sin(H * pi/180)) %&gt;%
    mutate(perpendicular_from_C_L = x * sin(-H_point * pi/180) + y * cos(-H_point * pi/180),
           parallel_along_C_L = x * cos(-H_point * pi/180) - y * sin(-H_point * pi/180)) %&gt;%
    mutate(row_value = sample(row_number(), n()),
           col_value = ceiling(row_value / sqrt(n_color))) %&gt;%
    mutate(row_value = (row_value %% sqrt(n_color)) + 1) %&gt;%
    mutate(L_cut = as.character(
      cut(L, breaks = c(-Inf, seq(L_point - width, 
                                  L_point + width, 
                                  length.out = 7), 
                        Inf),
          labels = c(L_point - width, 
                     seq(L_point - (width * .8), 
                         L_point + (width * .8), 
                         length.out = 6), 
                     L_point + width))),
      C_cut = as.character(
        cut(C,
            breaks = c(-Inf, 
                       seq(C_point - width, 
                           C_point + width, 
                           length.out = 7), 
                       Inf),
            labels = c(C_point - width, 
                       seq(C_point - (width * .8), 
                           C_point + (width * .8), 
                           length.out = 6), 
                       C_point + width))),
      H_cut = as.character(
        cut((180 - abs(abs(H - H_point) - 180)) * 
              sign(180 - abs(H - H_point)) * 
              sign(H - H_point),
            breaks = c(-Inf, 
                       seq(0 - width, 
                           0 + width, 
                           length.out = 7), 
                       Inf),
            labels = c(H_point - width, 
                       seq(H_point - (width * .8), 
                           H_point + (width * .8), 
                           length.out = 6), 
                       H_point + width) %% 360)),
      perpendicular_from_C_L_cut = as.character(
        cut(perpendicular_from_C_L,
            breaks = c(-Inf, seq(0 - width, 
                                 0 + width, 
                                 length.out = 7), 
                       Inf),
            labels = c(0 - width, 
                       seq(0 - (width * .8), 
                           0 + (width * .8), 
                           length.out = 6), 
                       0 + width))),
      parallel_along_C_L_cut = as.character(
        cut(parallel_along_C_L,
            breaks = c(-Inf, 
                       seq(C_point - width, 
                           C_point + width, 
                           length.out = 7), 
                       Inf),
            labels = c(C_point - width, 
                       seq(C_point - (width * .8), 
                           C_point + (width * .8), 
                           length.out = 6), 
                       C_point + width)))) %&gt;%
    mutate(L_cut = as.factor(as.numeric(L_cut)),
           C_cut = as.factor(as.numeric(C_cut)),
           H_cut = as.factor(as.numeric(H_cut)),
           perpendicular_from_C_L_cut = 
             as.factor(as.numeric(perpendicular_from_C_L_cut)),
           parallel_along_C_L_cut = 
             as.factor(as.numeric(parallel_along_C_L_cut))) %&gt;%
    mutate(H_cut = fct_expand(H_cut, 
                              as.character(c(H_point - width, 
                                             seq(H_point - (width * .8), 
                                                 H_point + (width * .8), 
                                                 length.out = 6), 
                                             H_point + width) %% 360)),
           perpendicular_from_C_L_cut = 
             fct_expand(perpendicular_from_C_L_cut,
                        as.character(c(0 - width, 
                                       seq(0 - (width * .8), 
                                           0 + (width * .8), 
                                           length.out = 6), 
                                       0 + width)))) %&gt;%
    mutate(H_cut = fct_relevel(H_cut, 
                               as.character(c(H_point - width, 
                                              seq(H_point - (width * .8), 
                                                  H_point + (width * .8), 
                                                  length.out = 6), 
                                              H_point + width) %% 360)),
           perpendicular_from_C_L_cut = 
             fct_relevel(perpendicular_from_C_L_cut,
                         as.character(c(0 - width, 
                                        seq(0 - (width * .8), 
                                            0 + (width * .8), 
                                            length.out = 6), 
                                        0 + width)))) %&gt;%
    mutate(H_cut = fct_rev(H_cut),
           perpendicular_from_C_L_cut = fct_rev(perpendicular_from_C_L_cut))
}

xyl &lt;- get_xyl_data(H_point, C_point, L_point, width, n_color)

graph_info &lt;- function(H_point, C_point, L_point) {
  color_hex &lt;- hcl(H_point, 
                   C_point,
                   L_point,
                   fixup = FALSE)
  
  ggplot() +
    geom_rect(aes(xmin = 0, xmax = 1,
                  ymin = 0, ymax = .5), col = color_hex, fill = color_hex) +
    geom_text(data = data.frame(x = 0,
                                y = seq(1.5, .75, -.25),
                                label = c(paste(&quot;HEX Value:&quot;, color_hex), 
                                          paste(&quot;H Value:&quot;, H_point),
                                          paste(&quot;C Value:&quot;, C_point),
                                          paste(&quot;L Value:&quot;, L_point))),
              aes(x, y, label = label), hjust = 0, size = 4) +
    coord_equal() +
    theme_void()
}

graph_sample &lt;- function(color_points) {
  ggplot(data = color_points,
         aes(x = row_value,
             y = col_value,
             fill = color_value)) +
    geom_tile() +
    coord_equal() +
    scale_fill_identity() +
    theme_void()
}

p1 &lt;- graph_info(H_point, C_point, L_point)
p2 &lt;- graph_sample(xyl)
p1 + p2

# C L plane by H
graph_C_L_by_H &lt;- function(color_points) {
  ggplot(data = color_points, aes(C, L, 
                                  col = color_value, fill = color_value)) +
    geom_point() +
    scale_color_identity() +
    scale_fill_identity() +
    facet_wrap(~ H_cut, nrow = 2) +
    coord_equal() 
}

get_C_L_plane_by_H &lt;- function(color_points, H_point, width) {
  map_dfr(as.numeric(as.character(unique(color_points$H_cut))), 
          get_C_L_plane) %&gt;%
    mutate(H_cut = as.factor(H)) %&gt;%
    mutate(H_cut = fct_expand(H_cut, 
                              as.character(c(H_point - width, 
                                             seq(H_point - (width * .8), 
                                                 H_point + (width * .8), 
                                                 length.out = 6), 
                                             H_point + width) %% 360))) %&gt;%
    mutate(H_cut = fct_relevel(H_cut, 
                               as.character(c(H_point - width, 
                                              seq(H_point - (width * .8), 
                                                  H_point + (width * .8), 
                                                  length.out = 6), 
                                              H_point + width) %% 360))) %&gt;%
    mutate(H_cut = fct_rev(H_cut))
}
C_L_plane_by_H &lt;- get_C_L_plane_by_H(xyl, H_point, width)

graph_C_L_plane_by_H &lt;- function(C_L_plane, color_points) {
  ggplot() +
    geom_point(data = C_L_plane,
               aes(C, L, color = color_value, fill = color_value)) +
    geom_point(data = color_points,
               aes(C, L, color = &quot;white&quot;, fill = &quot;white&quot;)) +
    scale_x_continuous(labels = abs) +
    scale_color_identity() +
    scale_fill_identity() +
    facet_wrap(~ H_cut, nrow = 2) +
    coord_equal()
}
graph_C_L_plane_by_H(C_L_plane_by_H, xyl)
graph_C_L_by_H(xyl)

# H L curve
graph_H_L_by_C &lt;- function(color_points, H_point) {
  ggplot(data = color_points, aes((H + (180 - H_point)) %% 360, L, 
                                  color = color_value, fill = color_value)) +
    geom_point() +
    scale_color_identity() +
    scale_fill_identity() +
    scale_x_reverse(&#39;H&#39;, # Like you&#39;re standing on the inside
                    labels = label_H_center(H_point = H_point)) +
    facet_wrap(~ C_cut, nrow = 2) +
    coord_equal()
}

get_H_L_curve_by_C &lt;- function(color_points) {
  map_dfr(as.numeric(as.character(unique(color_points$C_cut))), get_H_L_curve) %&gt;%
    mutate(C_cut = as.factor(C))
}
H_L_curve_by_C &lt;- get_H_L_curve_by_C(xyl)

graph_H_L_curve_by_C &lt;- function(H_L_curve_by_C, color_points, H_point) {
  ggplot() +
    geom_point(data = H_L_curve_by_C,
               aes((H + (180 - H_point)) %% 360, L, 
                   color = color_value, fill = color_value)) +
    geom_point(data = color_points,
               aes((H + (180 - H_point)) %% 360, L, 
                   color = &quot;white&quot;, fill = &quot;white&quot;)) +
    scale_color_identity() +
    scale_fill_identity() +
    scale_x_reverse(&#39;H&#39;, # Like you&#39;re standing on the inside
                    labels = label_H_center(H_point = H_point),
                    limits = c(360, 0)) +
    facet_wrap(~ C_cut, nrow = 2) +
    coord_equal()
}
graph_H_L_curve_by_C(H_L_curve_by_C, xyl, H_point)
graph_H_L_by_C(xyl, H_point)

# H C plane by L
graph_x_y_by_L &lt;- function(color_points, H_point) {
  ggplot(data = color_points, aes(x, y, 
                                  col = color_value, fill = color_value)) +
    geom_abline(slope = c(tan(-67.5 * pi/180), 
                          tan(-45 * pi/180), 
                          tan(-22.5 * pi/180),
                          0, 100000,
                          tan(22.5 * pi/180), 
                          tan(45 * pi/180), 
                          tan(67.5 * pi/180)), 
                intercept = 0,
                color = &quot;white&quot;) +
    geom_abline(slope = tan(H_point * pi/180), 
                intercept = 0,
                color = &quot;black&quot;) +
    geom_point() +
    scale_color_identity() +
    scale_fill_identity() +
    facet_wrap(~ L_cut, nrow = 2) +
    coord_equal() +
    theme(axis.line=element_blank(), axis.text.x=element_blank(),
          axis.text.y=element_blank(), axis.ticks=element_blank(),
          axis.title.x=element_blank(), axis.title.y=element_blank(),
          panel.grid.major=element_blank(), panel.grid.minor=element_blank())
}

get_H_C_plane_by_L &lt;- function(color_points) {
  map_dfr(as.numeric(
    as.character(unique(color_points$L_cut))), get_H_C_plane) %&gt;%
    mutate(L_cut = as.factor(L))
}
H_C_plane_by_L &lt;- get_H_C_plane_by_L(xyl)

graph_H_C_plane_by_L &lt;- function(H_C_plane_by_L, color_points) {
  ggplot() +
    geom_point(data = H_C_plane_by_L,
               aes(H, C, color = color_value, fill = color_value)) +
    geom_point(data = color_points,
               aes(H , C, color = &quot;white&quot;, fill = &quot;white&quot;)) +
    scale_color_identity() +
    scale_fill_identity() +
    scale_x_continuous(breaks = seq(45, 360, 45),
                       minor_breaks = seq(0, 315, 45) + 45/2,
                       labels = c(&#39;45&#39;, &#39;90&#39;, &#39;135&#39;, &#39;180&#39;, 
                                  &#39;225&#39;, &#39;270&#39;, &#39;315&#39;, &#39;0|360&#39;)) +
    scale_y_continuous(limits = c(0, 180)) +
    facet_wrap(~ L_cut, nrow = 2) +
    coord_polar(start = 270 * pi / 180,
                direction = -1)
}
graph_H_C_plane_by_L(H_C_plane_by_L, xyl)
graph_x_y_by_L(xyl, H_point)

# C tangent plane
label_perpendicular_from_C_L_cut&lt;- function(x) {
  as.character(abs(as.numeric(x)))
}

graph_parallel_perpendicular_by_L &lt;- function(color_points) {
  ggplot(data = color_points, 
         aes(x = parallel_along_C_L,
             y = perpendicular_from_C_L,
             color = color_value)) +
    geom_point() +
    scale_color_identity() +
    scale_y_continuous(&quot;Distance Perpendicular to C-L Plane&quot;, # similar to H
                       labels = abs) +
    labs(x = &quot;Distance Parallel to C-L Plane&quot;) + # similar to C
    facet_wrap(~ L_cut, nrow = 2) +
    coord_equal()
}
graph_parallel_perpendicular_by_L(xyl)

graph_perpendicular_L_by_parallel &lt;- function(color_points) {
  ggplot(data = color_points, 
         aes(x = perpendicular_from_C_L,
             y = L,
             color = color_value)) +
    geom_point() +
    scale_color_identity() +
    scale_x_continuous(&quot;Distance Perpendicular to C-L Plane&quot;,
                       labels = abs) +
    scale_y_continuous(labels = abs) +
    facet_wrap(~ parallel_along_C_L_cut, nrow = 2) +
    coord_equal()
}
graph_perpendicular_L_by_parallel(xyl)

graph_parallel_L_by_perpendicular &lt;- function(color_points) {
  ggplot(data = color_points, 
         aes(x = parallel_along_C_L,
             y = L,
             color = color_value)) +
    geom_point() +
    scale_color_identity() +
    labs(x = &quot;Distance Parallel to C-L Plane&quot;) +
    facet_wrap(~ perpendicular_from_C_L_cut, nrow = 2,
               labeller = as_labeller(label_perpendicular_from_C_L_cut)) +
    coord_equal()
}
graph_parallel_L_by_perpendicular(xyl)</code></pre>
</details>
<br>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/xyl_info.png" alt="xyl Info" style="display:block; margin:auto;" />
<p class="caption">
xyl Info
</p>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center; grid-column-gap: 1px;">
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/xyl_c_l_plane.png" alt="xyl C-L Plane" style="display:block; margin:auto;" />
<p class="caption">
xyl C-L Plane
</p>
</div>
</div>
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/xyl_c_l.png" alt="xyl C-L" style="display:block; margin:auto;" />
<p class="caption">
xyl C-L
</p>
</div>
</div>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center; grid-column-gap: 1px;">
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/xyl_h_l_curve.png" alt="xyl H-L Curve" style="display:block; margin:auto;" />
<p class="caption">
xyl H-L Curve
</p>
</div>
</div>
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/xyl_h_l.png" alt="xyl H-L" style="display:block; margin:auto;" />
<p class="caption">
xyl H-L
</p>
</div>
</div>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center; grid-column-gap: 1px;">
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/xyl_h_c_plane.png" alt="xyl H-C Plane" style="display:block; margin:auto;" />
<p class="caption">
xyl H-C Plane
</p>
</div>
</div>
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/xyl_h_c.png" alt="xyl H-C" style="display:block; margin:auto;" />
<p class="caption">
xyl H-C
</p>
</div>
</div>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/xyl_par_per.png" alt="xyl xyl_par_per" style="display:block; margin:auto;" />
<p class="caption">
xyl xyl_par_per
</p>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center; grid-column-gap: 1px;">
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/xyl_per_l.png" alt="xyl xyl_per_l" style="display:block; margin:auto;" />
<p class="caption">
xyl xyl_per_l
</p>
</div>
</div>
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/xyl_par_l.png" alt="xyl xyl_par_l" style="display:block; margin:auto;" />
<p class="caption">
xyl xyl_par_l
</p>
</div>
</div>
</div>
<hr>
<center>
<h2>
HCL Perimeter
</h2>
</center>
<hr>
<p>For this code, we’ll only pull points on the perimeter, unlike the previous post that had points at random in the sphere. For the first section, we’ll move away from the base point along Hue, Chroma, and Luminance. This means curving around when changing Hue values. The code also groups points based on cuts in the perimeter.</p>
<details>
<summary>
[HCL Perimeter Code]
</summary>
<pre class="r"><code>##------------------
# H, C, L, perimeter
##------------------
get_hcl_data &lt;- function(H_point, C_point, L_point, width, n_color) {
 data.frame(theta = 2 * pi * seq(0, n_color - 1) / ((1 + sqrt(5)) / 2),
                  phi = acos(1 - 2 * (seq(0, n_color - 1) + .5) / n_color)) %&gt;%
  mutate(H = cos(theta) * sin(phi),
         C = sin(theta) * sin(phi),
         L = cos(phi)) %&gt;%
  mutate(H = H * width + H_point,
         C = C * width + C_point,
         L = L * width + L_point) %&gt;%
  mutate(H = H %% 360) %&gt;% # not really needed except for graphs
  filter(L &gt;= 0 &amp; L &lt;= 100 &amp; C &gt;= 0) %&gt;%
  mutate(color_value = hcl(h = H,
                           c = C,
                           l = L)) %&gt;%
  mutate(x = C * cos(H * pi/180),
         y = C * sin(H * pi/180)) %&gt;%
  mutate(perpendicular_from_C_L = x * sin(-H_point * pi/180) + 
           y * cos(-H_point * pi/180), # not a C value since we didn&#39;t rotate by H
         parallel_along_C_L = x * cos(-H_point * pi/180) - 
           y * sin(-H_point * pi/180)) %&gt;%
  mutate(row_value = sample(row_number(), n()),
         col_value = ceiling(row_value / sqrt(n_color))) %&gt;%
  mutate(row_value = (row_value %% sqrt(n_color)) + 1) %&gt;%
  mutate(L_cut = as.character(
    cut(L, breaks = c(-Inf, seq(L_point - width, 
                                L_point + width, 
                                length.out = 7), 
                      Inf),
        labels = c(L_point - width, 
                   seq(L_point - (width * .8), 
                       L_point + (width * .8), 
                       length.out = 6), 
                   L_point + width))),
         C_cut = as.character(
           cut(C,
               breaks = c(-Inf, 
                          seq(C_point - width, 
                              C_point + width, 
                              length.out = 7), 
                          Inf),
               labels = c(C_point - width, 
                          seq(C_point - (width * .8), 
                              C_point + (width * .8), 
                              length.out = 6), 
                          C_point + width))),
         H_cut = as.character(
           cut((180 - abs(abs(H - H_point) - 180)) * 
                 sign(180 - abs(H - H_point)) * 
                 sign(H - H_point),
               breaks = c(-Inf, 
                          seq(0 - width, 
                              0 + width, 
                              length.out = 7), 
                          Inf),
               labels = c(H_point - width, 
                          seq(H_point - (width * .8), 
                              H_point + (width * .8), 
                              length.out = 6), 
                          H_point + width) %% 360)),
         perpendicular_from_C_L_cut = as.character(
           cut(perpendicular_from_C_L,
               breaks = c(-Inf, seq(0 - width, 
                                    0 + width, 
                                    length.out = 7), 
                          Inf),
               labels = c(0 - width, 
                          seq(0 - (width * .8), 
                              0 + (width * .8), 
                              length.out = 6), 
                          0 + width))),
         parallel_along_C_L_cut = as.character(
           cut(parallel_along_C_L,
               breaks = c(-Inf, 
                          seq(C_point - width, 
                              C_point + width, 
                              length.out = 7), 
                          Inf),
               labels = c(C_point - width, 
                          seq(C_point - (width * .8), 
                              C_point + (width * .8), 
                              length.out = 6), 
                          C_point + width)))) %&gt;%
  mutate(L_cut = as.factor(as.numeric(L_cut)),
         C_cut = as.factor(as.numeric(C_cut)),
         H_cut = as.factor(as.numeric(H_cut)),
         perpendicular_from_C_L_cut = 
           as.factor(as.numeric(perpendicular_from_C_L_cut)),
         parallel_along_C_L_cut = 
           as.factor(as.numeric(parallel_along_C_L_cut))) %&gt;%
  mutate(H_cut = fct_expand(H_cut, 
                            as.character(c(H_point - width, 
                                           seq(H_point - (width * .8), 
                                               H_point + (width * .8), 
                                               length.out = 6), 
                                           H_point + width) %% 360)),
         perpendicular_from_C_L_cut = 
           fct_expand(perpendicular_from_C_L_cut,
                      as.character(c(0 - width, 
                                     seq(0 - (width * .8), 
                                         0 + (width * .8), 
                                         length.out = 6), 
                                     0 + width)))) %&gt;%
  mutate(H_cut = fct_relevel(H_cut, 
                             as.character(c(H_point - width, 
                                            seq(H_point - (width * .8), 
                                                H_point + (width * .8), 
                                                length.out = 6), 
                                            H_point + width) %% 360)),
         perpendicular_from_C_L_cut = 
           fct_relevel(perpendicular_from_C_L_cut,
                      as.character(c(0 - width, 
                                     seq(0 - (width * .8), 
                                         0 + (width * .8), 
                                         length.out = 6), 
                                     0 + width)))) %&gt;%
  mutate(H_cut = fct_rev(H_cut),
         perpendicular_from_C_L_cut = fct_rev(perpendicular_from_C_L_cut))
}

hcl &lt;- get_hcl_data(H_point, C_point, L_point, width, n_color)

p1 &lt;- graph_info(H_point, C_point, L_point)
p2 &lt;- graph_sample(hcl)
p1 + p2

# C L plane by H
C_L_plane_by_H &lt;- get_C_L_plane_by_H(hcl, H_point, width)
graph_C_L_by_H(hcl)
graph_C_L_plane_by_H(C_L_plane_by_H, hcl)

# H L curve
H_L_curve_by_C &lt;- get_H_L_curve_by_C(hcl)
graph_H_L_by_C(hcl, H_point)
graph_H_L_curve_by_C(H_L_curve_by_C, hcl, H_point)

# H C plane by L
H_C_plane_by_L &lt;- get_H_C_plane_by_L(hcl)
graph_x_y_by_L(hcl, H_point)
graph_H_C_plane_by_L(H_C_plane_by_L, hcl)

# C tangent plane
graph_parallel_perpendicular_by_L(hcl)

graph_perpendicular_L_by_parallel(hcl)

graph_parallel_L_by_perpendicular(hcl)</code></pre>
</details>
<p><br></p>
This first set of graphs plots the C-L plane split by Hue values, both the perimeter and where it fits in the color space. We see these nice circles as the perimeter is cut moving along Hue values.
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/hcl_info.png" alt="HCL Info" style="display:block; margin:auto;" />
<p class="caption">
HCL Info
</p>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center; grid-column-gap: 1px;">
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/hcl_c_l_plane.png" alt="HCL C-L Plane" style="display:block; margin:auto;" />
<p class="caption">
HCL C-L Plane
</p>
</div>
</div>
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/hcl_c_l.png" alt="HCL C-L" style="display:block; margin:auto;" />
<p class="caption">
HCL C-L
</p>
</div>
</div>
</div>
<p>The next set shows H-L Curve split by different Chroma values. Technically, the image on the right should have wider graphs as the Chroma values increases because the size of the circle is increasing, but I’m not sure how to do that with <code>ggplot2</code>.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center; grid-column-gap: 1px;">
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/hcl_h_l_curve.png" alt="HCL H-L Curve" style="display:block; margin:auto;" />
<p class="caption">
HCL H-L Curve
</p>
</div>
</div>
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/hcl_h_l.png" alt="HCL H-L" style="display:block; margin:auto;" />
<p class="caption">
HCL H-L
</p>
</div>
</div>
</div>
<p>The next graph breaks the trend of nice circles. Here we see tear drop shapes instead. The next images pull this apart a little more.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center; grid-column-gap: 1px;">
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/hcl_h_c_plane.png" alt="HCL H-C Plane" style="display:block; margin:auto;" />
<p class="caption">
HCL H-C Plane
</p>
</div>
</div>
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/hcl_h_c.png" alt="HCL H-C" style="display:block; margin:auto;" />
<p class="caption">
HCL H-C
</p>
</div>
</div>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/hcl_par_per.png" alt="HCL hcl_par_per" style="display:block; margin:auto;" />
<p class="caption">
HCL hcl_par_per
</p>
</div>
<p>Notice that C_point is at 26. Not in the middle of the circle part, like at 30</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center; justify-items: center; grid-column-gap: 1px;">
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/hcl_per_l.png" alt="HCL hcl_per_l" style="display:block; margin:auto;" />
<p class="caption">
HCL hcl_per_l
</p>
</div>
</div>
<div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/hcl_par_l.png" alt="HCL hcl_par_l" style="display:block; margin:auto;" />
<p class="caption">
HCL hcl_par_l
</p>
</div>
</div>
</div>
<hr>
<center>
<h2>
Compare Perimeters
</h2>
</center>
<hr>
<details>
<summary>
[Compare Code]
</summary>
<pre class="r"><code>##-------
# Compare
##-------
compare &lt;- rbind(xyl[, c(&#39;H&#39;, &#39;C&#39;, &#39;L&#39;, &#39;x&#39;, &#39;y&#39;, 
                         &#39;H_cut&#39;, &#39;C_cut&#39;, &#39;L_cut&#39;, 
                         &#39;perpendicular_from_C_L&#39;, &#39;parallel_along_C_L&#39;, 
                         &#39;perpendicular_from_C_L_cut&#39;, &#39;parallel_along_C_L_cut&#39;,
                         &#39;row_value&#39;, &#39;col_value&#39;, &#39;color_value&#39;)],
                 hcl[, c(&#39;H&#39;, &#39;C&#39;, &#39;L&#39;, &#39;x&#39;, &#39;y&#39;, 
                         &#39;H_cut&#39;, &#39;C_cut&#39;, &#39;L_cut&#39;, 
                         &#39;perpendicular_from_C_L&#39;, &#39;parallel_along_C_L&#39;, 
                         &#39;perpendicular_from_C_L_cut&#39;, &#39;parallel_along_C_L_cut&#39;,
                         &#39;row_value&#39;, &#39;col_value&#39;, &#39;color_value&#39;)]) %&gt;%
  mutate(setting = c(rep(&#39;XYL&#39;, n_color), rep(&#39;HCL&#39;, n_color))) 

# C L plane
graph_C_L_by_H_comparison &lt;- function(color_points) {
  ggplot(data = color_points, aes(C, L, col = setting)) +
    geom_point(alpha = .5) +
    facet_wrap(~ H_cut, nrow = 2) +
    coord_equal() +
    scale_color_discrete(&quot;&quot;) +
    theme(legend.position = &quot;bottom&quot;)
}
graph_C_L_by_H_comparison(compare)

# H L curve
graph_H_L_by_C_comparison &lt;- function(color_points, H_point) {
  ggplot(data = color_points, 
         aes((H + (180 - H_point)) %% 360, L, color = setting)) +
    geom_point(alpha = .5) +
    scale_x_reverse(&#39;H&#39;,
                    labels = label_H_center(H_point = H_point)) +
    facet_wrap(~ C_cut, nrow = 2) +
    coord_equal() +
    scale_color_discrete(&quot;&quot;) +
    theme(legend.position = &quot;bottom&quot;)
}
graph_H_L_by_C_comparison(compare, H_point)

# H C plane
graph_x_y_by_L_comparison &lt;- function(color_points, H_point) {
  ggplot(data = color_points, aes(x, y, col = setting)) +
    geom_abline(slope = c(tan(-67.5 * pi/180), 
                          tan(-45 * pi/180), 
                          tan(-22.5 * pi/180),
                          0, 100000,
                          tan(22.5 * pi/180), 
                          tan(45 * pi/180), 
                          tan(67.5 * pi/180)), 
                intercept = 0,
                color = &quot;white&quot;) +
    geom_abline(slope = tan(H_point * pi/180), 
                intercept = 0,
                color = &quot;black&quot;) +
    geom_point(alpha = .5) +
    facet_wrap(~ L_cut, nrow = 2) +
    coord_equal() +
    scale_color_discrete(&quot;&quot;) +
    theme(legend.position = &quot;bottom&quot;,
          axis.line=element_blank(), axis.text.x=element_blank(),
          axis.text.y=element_blank(), axis.ticks=element_blank(),
          axis.title.x=element_blank(), axis.title.y=element_blank(),
          panel.grid.major=element_blank(), panel.grid.minor=element_blank())
}
graph_x_y_by_L_comparison(compare, H_point)

# C tangent plane
graph_parallel_perpendicular_by_L_comparison &lt;- function(color_points) {
  ggplot(data = color_points, 
         aes(x = parallel_along_C_L,
             y = perpendicular_from_C_L,
             color = setting)) +
    geom_point(alpha = .5) +
    scale_y_continuous(&quot;Distance Perpendicular to C-L Plane&quot;,
                       labels = abs) +
    labs(x = &quot;Distance Parallel to C-L Plane&quot;) +
    facet_wrap(~ L_cut, nrow = 2) +
    coord_equal() +
    scale_color_discrete(&quot;&quot;) +
    theme(legend.position = &quot;bottom&quot;)
}
graph_parallel_perpendicular_by_L_comparison(compare)

graph_perpendicular_L_by_parallel_comparison &lt;- function(color_points) {
  ggplot(data = color_points, 
         aes(x = perpendicular_from_C_L,
             y = L,
             color = setting)) +
    geom_point(alpha = .5) +
    scale_x_continuous(&quot;Distance Perpendicular to C-L Plane&quot;, 
            labels = abs) +
    scale_y_continuous(labels = abs) +
    facet_wrap(~ parallel_along_C_L_cut, nrow = 2) +
    coord_equal() +
    scale_color_discrete(&quot;&quot;) +
    theme(legend.position = &quot;bottom&quot;)
}
graph_perpendicular_L_by_parallel_comparison(compare)

graph_parallel_L_by_perpendicular_comparison &lt;- function(color_points) {
  ggplot(data = color_points, 
         aes(x = parallel_along_C_L,
             y = L,
             color = setting)) +
    geom_point(alpha = .5) +
    labs(x = &quot;Distance Parallel to C-L Plane&quot;) +
    facet_wrap(~ perpendicular_from_C_L_cut, nrow = 2,
               labeller = as_labeller(label_perpendicular_from_C_L_cut)) +
    coord_equal() +
    scale_color_discrete(&quot;&quot;) +
    theme(legend.position = &quot;bottom&quot;)
}
graph_parallel_L_by_perpendicular_comparison(compare)

compare &lt;- compare %&gt;%
  group_by(setting) %&gt;%
  arrange((180 - abs(abs(H - H_point) - 180)) * 
            sign(180 - abs(H - H_point)) * sign(H - H_point)) %&gt;%
  mutate(col_value = ceiling(row_number() / sqrt(n_color))) %&gt;%
  arrange(col_value, L) %&gt;%
  group_by(setting, col_value) %&gt;%
  mutate(row_value = row_number())

ggplot(data = compare,
       aes(x = col_value,
           y = row_value,
           fill = color_value)) +
  geom_tile() +
  coord_equal() +
  scale_fill_identity() +
  theme_void() +
  facet_grid(~setting)

compare &lt;- compare %&gt;%
  group_by(setting) %&gt;%
  arrange((180 - abs(abs(H - H_point) - 180)) * 
            sign(180 - abs(H - H_point)) * sign(H - H_point)) %&gt;%
  mutate(col_value = ceiling(row_number() / sqrt(n_color))) %&gt;%
  arrange(col_value, C) %&gt;%
  group_by(setting, col_value) %&gt;%
  mutate(row_value = row_number())

ggplot(data = compare,
       aes(x = col_value,
           y = row_value,
           fill = color_value)) +
  geom_tile() +
  coord_equal() +
  scale_fill_identity() +
  theme_void() +
  facet_grid(~setting)</code></pre>
</details>
<br>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/compare_c_l.png" alt="compare_c_l" style="display:block; margin:auto;" />
<p class="caption">
compare_c_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/compare_h_l.png" alt="compare_h_l" style="display:block; margin:auto;" />
<p class="caption">
compare_h_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/compare_h_c.png" alt="compare_h_c" style="display:block; margin:auto;" />
<p class="caption">
compare_h_c
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/compare_par_per.png" alt="compare_par_per" style="display:block; margin:auto;" />
<p class="caption">
compare_par_per
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/compare_per_l.png" alt="compare_per_l" style="display:block; margin:auto;" />
<p class="caption">
compare_per_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/compare_par_l.png" alt="compare_par_l" style="display:block; margin:auto;" />
<p class="caption">
compare_par_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/compare_samples.png" alt="compare_samples" style="display:block; margin:auto;" />
<p class="caption">
compare_samples
</p>
</div>
<p>I think at this point in the post I’m supposed to say one is better than the other, but I think they’re just different. So let’s just compare the samples.</p>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/compare_samples2.png" alt="compare_samples2" style="display:block; margin:auto;" />
<p class="caption">
compare_samples2
</p>
</div>
<hr>
<center>
<h2>
Lower Chroma Value
</h2>
</center>
<hr>
<details>
<summary>
[Lower Chroma Value Code]
</summary>
<pre class="r"><code>## Try lower value of C ----
C_point &lt;- 16

xyl &lt;- get_xyl_data(H_point, C_point, L_point, width, n_color)

hcl &lt;- get_hcl_data(H_point, C_point, L_point, width, n_color)

compare &lt;- rbind(xyl[, c(&#39;H&#39;, &#39;C&#39;, &#39;L&#39;, &#39;x&#39;, &#39;y&#39;, 
                         &#39;H_cut&#39;, &#39;C_cut&#39;, &#39;L_cut&#39;, 
                         &#39;perpendicular_from_C_L&#39;, &#39;parallel_along_C_L&#39;, 
                         &#39;perpendicular_from_C_L_cut&#39;, &#39;parallel_along_C_L_cut&#39;,
                         &#39;row_value&#39;, &#39;col_value&#39;, &#39;color_value&#39;)],
                 hcl[, c(&#39;H&#39;, &#39;C&#39;, &#39;L&#39;, &#39;x&#39;, &#39;y&#39;, 
                         &#39;H_cut&#39;, &#39;C_cut&#39;, &#39;L_cut&#39;, 
                         &#39;perpendicular_from_C_L&#39;, &#39;parallel_along_C_L&#39;, 
                         &#39;perpendicular_from_C_L_cut&#39;, &#39;parallel_along_C_L_cut&#39;,
                         &#39;row_value&#39;, &#39;col_value&#39;, &#39;color_value&#39;)]) %&gt;%
  mutate(setting = c(rep(&#39;XYL&#39;, n_color), rep(&#39;HCL&#39;, n_color))) 

# C L plane
graph_C_L_by_H_comparison(compare)

# H L curve
graph_H_L_by_C_comparison(compare, H_point)

# H C plane
graph_x_y_by_L_comparison(compare, H_point)

# C tangent plane
graph_parallel_perpendicular_by_L_comparison(compare)

graph_perpendicular_L_by_parallel_comparison(compare)

graph_parallel_L_by_perpendicular_comparison(compare)

compare &lt;- compare %&gt;%
  group_by(setting) %&gt;%
  arrange((180 - abs(abs(H - H_point) - 180)) * 
            sign(180 - abs(H - H_point)) * sign(H - H_point)) %&gt;%
  mutate(col_value = ceiling(row_number() / sqrt(n_color))) %&gt;%
  arrange(col_value, L) %&gt;%
  group_by(setting, col_value) %&gt;%
  mutate(row_value = row_number())

ggplot(data = compare,
       aes(x = col_value,
           y = row_value,
           fill = color_value)) +
  geom_tile() +
  coord_equal() +
  scale_fill_identity() +
  theme_void() +
  facet_grid(~setting)

compare &lt;- compare %&gt;%
  group_by(setting) %&gt;%
  arrange((180 - abs(abs(H - H_point) - 180)) * 
            sign(180 - abs(H - H_point)) * sign(H - H_point)) %&gt;%
  mutate(col_value = ceiling(row_number() / sqrt(n_color))) %&gt;%
  arrange(col_value, C) %&gt;%
  group_by(setting, col_value) %&gt;%
  mutate(row_value = row_number())

ggplot(data = compare,
       aes(x = col_value,
           y = row_value,
           fill = color_value)) +
  geom_tile() +
  coord_equal() +
  scale_fill_identity() +
  theme_void() +
  facet_grid(~setting)</code></pre>
</details>
<br>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_lower_c_l.png" alt="C_lower_c_l" style="display:block; margin:auto;" />
<p class="caption">
C_lower_c_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_lower_h_l.png" alt="C_lower_h_l" style="display:block; margin:auto;" />
<p class="caption">
C_lower_h_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_lower_h_c.png" alt="C_lower_h_c" style="display:block; margin:auto;" />
<p class="caption">
C_lower_h_c
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_lower_par_per.png" alt="C_lower_par_per" style="display:block; margin:auto;" />
<p class="caption">
C_lower_par_per
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_lower_per_l.png" alt="C_lower_per_l" style="display:block; margin:auto;" />
<p class="caption">
C_lower_per_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_lower_par_l.png" alt="C_lower_par_l" style="display:block; margin:auto;" />
<p class="caption">
C_lower_par_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_lower_samples.png" alt="C_lower_samples" style="display:block; margin:auto;" />
<p class="caption">
C_lower_samples
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_lower_samples2.png" alt="C_lower_samples2" style="display:block; margin:auto;" />
<p class="caption">
C_lower_samples2
</p>
</div>
<hr>
<center>
<h2>
Higher Chroma Value
</h2>
</center>
<hr>
<details>
<summary>
[Higher Chroma Value Code]
</summary>
<pre class="r"><code>## Try higher value of C ----
C_point &lt;- 75
 
xyl &lt;- get_xyl_data(H_point, C_point, L_point, width, n_color)

hcl &lt;- get_hcl_data(H_point, C_point, L_point, width, n_color)

compare &lt;- rbind(xyl[, c(&#39;H&#39;, &#39;C&#39;, &#39;L&#39;, &#39;x&#39;, &#39;y&#39;, 
                         &#39;H_cut&#39;, &#39;C_cut&#39;, &#39;L_cut&#39;, 
                         &#39;perpendicular_from_C_L&#39;, &#39;parallel_along_C_L&#39;, 
                         &#39;perpendicular_from_C_L_cut&#39;, &#39;parallel_along_C_L_cut&#39;,
                         &#39;row_value&#39;, &#39;col_value&#39;, &#39;color_value&#39;)],
                 hcl[, c(&#39;H&#39;, &#39;C&#39;, &#39;L&#39;, &#39;x&#39;, &#39;y&#39;, 
                         &#39;H_cut&#39;, &#39;C_cut&#39;, &#39;L_cut&#39;, 
                         &#39;perpendicular_from_C_L&#39;, &#39;parallel_along_C_L&#39;, 
                         &#39;perpendicular_from_C_L_cut&#39;, &#39;parallel_along_C_L_cut&#39;,
                         &#39;row_value&#39;, &#39;col_value&#39;, &#39;color_value&#39;)]) %&gt;%
  mutate(setting = c(rep(&#39;XYL&#39;, n_color), rep(&#39;HCL&#39;, n_color))) 

# C L plane
graph_C_L_by_H_comparison(compare)
ggsave(here::here(&quot;output&quot;, &quot;color_compare&quot;, &quot;C_higher_c_l.png&quot;), 
       width = 5, height = 4)

# H L curve
graph_H_L_by_C_comparison(compare, H_point)
ggsave(here::here(&quot;output&quot;, &quot;color_compare&quot;, &quot;C_higher_h_l.png&quot;), 
       width = 5, height = 4)

# H C plane
graph_x_y_by_L_comparison(compare, H_point)
ggsave(here::here(&quot;output&quot;, &quot;color_compare&quot;, &quot;C_higher_h_c.png&quot;), 
       width = 5, height = 4)

# C tangent plane
graph_parallel_perpendicular_by_L_comparison(compare)
ggsave(here::here(&quot;output&quot;, &quot;color_compare&quot;, &quot;C_higher_par_per.png&quot;), 
       width = 5, height = 5)

graph_perpendicular_L_by_parallel_comparison(compare)
ggsave(here::here(&quot;output&quot;, &quot;color_compare&quot;, &quot;C_higher_per_l.png&quot;), 
       width = 5, height = 4)

graph_parallel_L_by_perpendicular_comparison(compare)
ggsave(here::here(&quot;output&quot;, &quot;color_compare&quot;, &quot;C_higher_par_l.png&quot;), 
       width = 5, height = 4)

compare &lt;- compare %&gt;%
  group_by(setting) %&gt;%
  arrange((180 - abs(abs(H - H_point) - 180)) * 
            sign(180 - abs(H - H_point)) * sign(H - H_point)) %&gt;%
  mutate(col_value = ceiling(row_number() / sqrt(n_color))) %&gt;%
  arrange(col_value, L) %&gt;%
  group_by(setting, col_value) %&gt;%
  mutate(row_value = row_number())

ggplot(data = compare,
       aes(x = col_value,
           y = row_value,
           fill = color_value)) +
  geom_tile() +
  coord_equal() +
  scale_fill_identity() +
  theme_void() +
  facet_grid(~setting)
ggsave(here::here(&quot;output&quot;, &quot;color_compare&quot;, &quot;C_higher_samples.png&quot;), 
       width = 5, height = 2.5)

compare &lt;- compare %&gt;%
  group_by(setting) %&gt;%
  arrange((180 - abs(abs(H - H_point) - 180)) * 
            sign(180 - abs(H - H_point)) * sign(H - H_point)) %&gt;%
  mutate(col_value = ceiling(row_number() / sqrt(n_color))) %&gt;%
  arrange(col_value, C) %&gt;%
  group_by(setting, col_value) %&gt;%
  mutate(row_value = row_number())

ggplot(data = compare,
       aes(x = col_value,
           y = row_value,
           fill = color_value)) +
  geom_tile() +
  coord_equal() +
  scale_fill_identity() +
  theme_void() +
  facet_grid(~setting)
ggsave(here::here(&quot;output&quot;, &quot;color_compare&quot;, &quot;C_higher_samples2.png&quot;), 
       width = 5, height = 2.5)</code></pre>
</details>
<br>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_higher_c_l.png" alt="C_higher_c_l" style="display:block; margin:auto;" />
<p class="caption">
C_higher_c_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_higher_h_l.png" alt="C_higher_h_l" style="display:block; margin:auto;" />
<p class="caption">
C_higher_h_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_higher_h_c.png" alt="C_higher_h_c" style="display:block; margin:auto;" />
<p class="caption">
C_higher_h_c
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_higher_par_per.png" alt="C_higher_par_per" style="display:block; margin:auto;" />
<p class="caption">
C_higher_par_per
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_higher_per_l.png" alt="C_higher_per_l" style="display:block; margin:auto;" />
<p class="caption">
C_higher_per_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_higher_par_l.png" alt="C_higher_par_l" style="display:block; margin:auto;" />
<p class="caption">
C_higher_par_l
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_higher_samples.png" alt="C_higher_samples" style="display:block; margin:auto;" />
<p class="caption">
C_higher_samples
</p>
</div>
<div class="figure">
<img src="/post/2021-08-10-choosing-nearby-colors-part-2/index.en-us_files/C_higher_samples2.png" alt="C_higher_samples2" style="display:block; margin:auto;" />
<p class="caption">
C_higher_samples2
</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>If you understand the difference between polar and Cartesian coordinates pretty well, this blog post will be obvious to you. But I’m bad at math and needed to see a lot of graphs to understand what was happening. So I figured I’d throw this in a blog post.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
